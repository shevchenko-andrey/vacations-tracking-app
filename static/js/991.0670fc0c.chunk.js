"use strict";(self.webpackChunkvacations_tracking_app=self.webpackChunkvacations_tracking_app||[]).push([[991],{3951:function(e,t,n){n.d(t,{Q:function(){return i}});var r=n(4142),a=n(2797),i=function(){var e=(0,r.Z)();return{isMobile:(0,a.Z)(e.breakpoints.down("sm")),isDesktop:(0,a.Z)(e.breakpoints.up("md"))}}},9118:function(e,t,n){var r;n.d(t,{U:function(){return r}}),function(e){e.DOT_FORMAT="DD.MM.YYYY",e.DAY="D",e.SHORT_DAY_OF_WEEK="ddd",e["SPA\u0421E_FULL_FORMAT"]="DD MM YYYY hh:mm:ss",e.SPACE_MONTH_YEAR_FORMAT="MMMM YYYY"}(r||(r={}))},4038:function(e,t,n){var r,a;n.d(t,{H:function(){return a},V:function(){return r}}),function(e){e.TABLE_VIEW="table view",e.CALENDAR_VIEW="calendar view"}(r||(r={})),function(e){e.ACTUAL="actual",e.HISTORY="history"}(a||(a={}))},4991:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var r=n(885),a=n(2419),i=n(2791),c=n(1087),o=n(919),s=n(4038),u=n(228),l=n(5590),d=n(4565),f=n(1091),p=n(4165),h=n(5861),x=n(7892),Z=n.n(x),v=n(2476),m=n(1441),j=n(7834),g=n(9118),A=n(7689),w=n(184),y=[{field:"id",headerName:"Absence ID",width:130},{field:"type",headerName:"Type",width:120},{field:"startDate",headerName:"Start Date",width:130,valueGetter:function(e){return Z()(e.row.startDate).format(g.U.DOT_FORMAT)}},{field:"endDate",headerName:"End Date",width:130,valueGetter:function(e){return Z()(e.row.endDate).format(g.U.DOT_FORMAT)}},{field:"notes",headerName:"Notes",width:400},{field:"actions",headerName:"Actions",width:260,valueGetter:function(e){return Z()(e.row.actions).format(g.U["SPA\u0421E_FULL_FORMAT"])}}],D=function(e){var t=e.filter,n=(0,i.useState)([]),a=(0,r.Z)(n,2),c=a[0],o=a[1],s=(0,i.useState)(!1),l=(0,r.Z)(s,2),f=l[0],x=l[1],Z=(0,A.s0)();return(0,i.useEffect)((function(){var e=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.XJ)({filter:t});case 2:n=e.sent,o(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{x(!0),e()}catch(n){console.log(n)}finally{x(!1)}}),[t]),f?(0,w.jsx)(m.Z,{width:"100%",component:"div",height:"400px",children:(0,w.jsx)(v._,{rows:c,columns:y})}):0===c.length?(0,w.jsx)(u.Z,{display:"flex",justifyContent:"center",children:(0,w.jsx)(d.Z,{children:"First add data"})}):(0,w.jsx)(v._,{onCellClick:function(e){var t=e.id;return Z("/vacation/request/".concat(t))},rows:c,columns:y,pageSize:5,rowsPerPageOptions:[5],checkboxSelection:!0})},b=function(e){var t=e.requestData,n=(0,A.s0)();return(0,w.jsx)(w.Fragment,{children:0===t.length?(0,w.jsx)(u.Z,{top:"0",left:"0",width:"100%",height:"100%",sx:{cursor:"pointer"},onClick:function(){return n("/vacation/request/")},position:"absolute"}):t.map((function(e){var t=e.id,r=e.type;return(0,w.jsx)(u.Z,{onClick:function(){return n("/vacation/request/".concat(t))},mt:"10px",sx:{cursor:"pointer"},children:(0,w.jsx)(d.Z,{textAlign:"center",children:r})},t)}))})},k=n(277),E=(0,k.ZP)(u.Z)({padding:"10px",color:"#fff",backgroundColor:"#837373",minHeight:"200px",position:"relative"}),_=(0,k.ZP)(u.Z)({backgroundColor:"#ccc",display:"grid",gap:"1px",gridTemplateColumns:"repeat(7, 1fr)",gridTemplateRows:"repeat(6, 1fr)"}),T=function(e){var t=e.arrayOfDay,n=e.selectedDate,a=(0,i.useState)([]),c=(0,r.Z)(a,2),o=c[0],s=c[1];return(0,i.useEffect)((function(){var e=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var t;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.Kt)(n);case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{e()}catch(t){}}),[n]),(0,w.jsx)(_,{children:t.map((function(e){return(0,w.jsxs)(E,{children:[(0,w.jsx)(u.Z,{color:e.isSame(n,"day")?"#ff0000":"#000",children:(0,w.jsx)(d.Z,{children:e.format(g.U.DAY)})}),(0,w.jsx)(u.Z,{width:"100%",overflow:"auto",display:"flex",flexDirection:"column",justifyContent:"center",children:0!==o.length&&(0,w.jsx)(b,{requestData:o.filter((function(t){var n=t.startDate,r=t.endDate;return e.isSame(n,"day")||e.isSame(r,"day")}))})})]},e.unix())}))})},C=(0,k.ZP)(u.Z)({padding:"10px",color:"#fff",backgroundColor:"#774353",position:"relative"}),S=(0,k.ZP)(u.Z)({backgroundColor:"#ccc",display:"grid",gap:"1px",gridTemplateColumns:"repeat(7,1fr)",gridTemplateRows:"1fr"}),O=n(2982),L=function(e,t){return(0,O.Z)(Array(t-1)).reduce((function(e){var t,n=null===(t=e.at(-1))||void 0===t?void 0:t.add(1,"day");return[].concat((0,O.Z)(e),[n])}),[e])},I=function(e){var t=e.startDayInstance,n=L(t,7);return(0,w.jsx)(S,{children:n.map((function(e){return(0,w.jsx)(C,{children:e.format(g.U.SHORT_DAY_OF_WEEK)},e.unix())}))})},V=function(e){var t=e.selectedDate,n=t.startOf("month").startOf("week"),r=L(n,42);return(0,w.jsxs)(u.Z,{children:[(0,w.jsx)(I,{startDayInstance:n}),(0,w.jsx)(T,{selectedDate:t,arrayOfDay:r})]})},M=n(148),R=n(8854),Y=function(e){var t=e.filter,n=e.handleToggleFilter;return(0,w.jsx)(u.Z,{maxWidth:"400px",children:(0,w.jsxs)(M.Z,{fullWidth:!0,color:"primary",value:t,exclusive:!0,onChange:n,"aria-label":"Platform",children:[(0,w.jsx)(R.Z,{fullWidth:!0,value:"actual",children:"Actual"}),(0,w.jsx)(R.Z,{fullWidth:!0,value:"history",children:"History"})]})})},F=n(9276),N=n(6582),U=n(3811),W=n(2156),P=n(8333),q=function(e){var t=e.setSelectedDate,n=e.selectedDate;return(0,w.jsxs)(F.Z,{display:"flex",alignItems:"center",children:[(0,w.jsxs)(N.Z,{variant:"contained","aria-label":"outlined primary button group",children:[(0,w.jsx)(U.Z,{onClick:function(){t(n.clone().subtract(1,"month"))},children:(0,w.jsx)(W.Z,{})}),(0,w.jsx)(U.Z,{onClick:function(){t(n.clone().add(1,"month"))},children:(0,w.jsx)(P.Z,{})})]}),(0,w.jsx)(F.Z,{ml:"20px",children:n.format(g.U.SPACE_MONTH_YEAR_FORMAT)})]})},H=n(3951),B=function(){var e=(0,i.useState)((function(){return Z()()})),t=(0,r.Z)(e,2),n=t[0],p=t[1],h=(0,i.useState)(s.H.ACTUAL),x=(0,r.Z)(h,2),v=x[0],m=x[1],j=(0,i.useState)(s.V.TABLE_VIEW),g=(0,r.Z)(j,2),A=g[0],y=g[1],b=(0,H.Q)(),k=b.isMobile,E=b.isDesktop;return(0,w.jsxs)(o.A,{title:"Dashboard",children:[(0,w.jsxs)(u.Z,{component:"section",pb:"60px",pt:"30px",children:[(0,w.jsxs)(u.Z,{display:"flex",mt:"30px",mb:"30px",position:"relative",justifyContent:"space-between",alignItems:"center",children:[A===s.V.TABLE_VIEW?(0,w.jsx)(Y,{filter:v,handleToggleFilter:function(e,t){m(t)}}):(0,w.jsx)(q,{selectedDate:n,setSelectedDate:p}),E&&(0,w.jsx)(u.Z,{top:30,left:"50%",children:(0,w.jsxs)(l.Z,{component:c.rU,to:"/vacation/request",color:"primary",variant:"extended","aria-label":"add",children:[(0,w.jsx)(a.Z,{}),(0,w.jsx)(u.Z,{pr:"10px",pl:"10px",children:(0,w.jsx)(d.Z,{children:"New request"})})]})}),(0,w.jsx)(u.Z,{children:(0,w.jsx)(f.Z,{variant:"contained",onClick:function(){A===s.V.TABLE_VIEW?y(s.V.CALENDAR_VIEW):y(s.V.TABLE_VIEW)},children:A===s.V.CALENDAR_VIEW?s.V.TABLE_VIEW:s.V.CALENDAR_VIEW})})]}),(0,w.jsx)(u.Z,{overflow:"auto",height:"400px",width:"100%",children:A===s.V.TABLE_VIEW?(0,w.jsx)(D,{filter:v}):(0,w.jsx)(V,{selectedDate:n})})]}),k&&(0,w.jsx)(u.Z,{children:(0,w.jsxs)(l.Z,{component:c.rU,to:"/vacation/request",color:"primary",variant:"extended","aria-label":"add",children:[(0,w.jsx)(a.Z,{}),(0,w.jsx)(u.Z,{pr:"10px",pl:"10px",children:(0,w.jsx)(d.Z,{children:"New request"})})]})})]})}},7834:function(e,t,n){n.d(t,{Kt:function(){return p},LX:function(){return h},QJ:function(){return f},XJ:function(){return d},m:function(){return Z},tE:function(){return x}});var r=n(1413),a=n(2982),i=n(4165),c=n(5861),o=n(9118),s=n(7892),u=n.n(s),l=n(4038),d=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter,r=localStorage.getItem("requests")){e.next=4;break}return e.abrupt("return",[]);case 4:a=JSON.parse(r),e.t0=n,e.next=e.t0===l.H.ACTUAL?8:e.t0===l.H.HISTORY?9:10;break;case 8:return e.abrupt("return",a.filter((function(e){var t=e.endDate;return u()(t).isAfter(u()())})));case 9:return e.abrupt("return",a.filter((function(e){var t=e.endDate;return u()(t).isBefore(u()())})));case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({});case 2:return n=e.sent,e.abrupt("return",n.find((function(e){var n=e.id;return t===n})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({});case 2:return n=e.sent,e.abrupt("return",n.filter((function(e){var n=e.endDate,r=e.startDate;return u()(n).isSame(t,"month")||u()(r).isSame(t,"month")})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:return e.abrupt("return",Z(n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({});case 2:return n=e.sent,r=n.filter((function(e){return e.id!==t})),localStorage.setItem("requests",JSON.stringify(r)),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var n,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({});case 2:return n=e.sent,c=[].concat((0,a.Z)(n),[(0,r.Z)((0,r.Z)({},t),{},{id:u()().unix(),actions:u()().format(o.U["SPA\u0421E_FULL_FORMAT"])})]),localStorage.setItem("requests",JSON.stringify(c)),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},919:function(e,t,n){n.d(t,{A:function(){return A}});var r=n(885),a=n(2791),i=n(1087),c=n(2892),o=n(4565),s=n(7394),u=n(4666),l=n(228),d=n(5590),f=n(3811),p=n(3978),h=n(4407),x=n(1091),Z=n(6598),v=n(184),m=function(e){var t=e.title,n=e.auth,m=e.email,j=e.handleLogOut,g=e.backLinkPath,A=(0,a.useState)(!1),w=(0,r.Z)(A,2),y=w[0],D=w[1],b=(0,a.useState)(null),k=(0,r.Z)(b,2),E=k[0],_=k[1];return(0,v.jsx)(c.Z,{position:"static",children:(0,v.jsx)(Z.Z,{children:(0,v.jsxs)(u.Z,{children:[(0,v.jsx)(l.Z,{children:g&&(0,v.jsx)(d.Z,{component:i.rU,to:g,color:"secondary",variant:"circular",children:(0,v.jsx)(s.Z,{})})}),(0,v.jsx)(o.Z,{textAlign:"center",variant:"h6",component:"p",sx:{flexGrow:1},children:t}),n&&(0,v.jsxs)("div",{children:[(0,v.jsx)(f.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){D(!0),_(e.currentTarget)},color:"inherit",children:(0,v.jsx)(p.Z,{sx:{bgcolor:"#74gfhg"},children:m[0].toUpperCase()})}),(0,v.jsx)(h.ZP,{open:y,anchorEl:E,onClose:function(){_(null),D(!1)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,v.jsxs)(l.Z,{p:"20px",children:[(0,v.jsx)(o.Z,{children:m}),(0,v.jsx)(l.Z,{color:"primary",display:"flex",justifyContent:"center",width:"100%",children:(0,v.jsx)(x.Z,{title:"Logout",onClick:j,children:"Logout"})})]})})]})]})})})},j=n(1868),g=n(7020),A=function(e){var t=e.title,n=e.children,r=e.backLinkPath,a=(0,j.K)(),i=a.email,c=a.handleLogOut,o=a.isLoggedIn;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(m,{auth:o,email:i,handleLogOut:c,title:t,backLinkPath:r}),(0,v.jsx)(g.Z,{component:"main",children:n})]})}}}]);
//# sourceMappingURL=991.0670fc0c.chunk.js.map