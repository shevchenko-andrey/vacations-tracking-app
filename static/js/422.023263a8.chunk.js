"use strict";(self.webpackChunkvacations_tracking_app=self.webpackChunkvacations_tracking_app||[]).push([[422],{3951:function(e,t,n){n.d(t,{Q:function(){return i}});var r=n(3967),a=n(5193),i=function(){var e=(0,r.Z)();return{isMobile:(0,a.Z)(e.breakpoints.down("sm")),isDesktop:(0,a.Z)(e.breakpoints.up("md"))}}},9118:function(e,t,n){var r;n.d(t,{U:function(){return r}}),function(e){e.DOT_FORMAT="DD.MM.YYYY",e.DAY="D",e.SHORT_DAY_OF_WEEK="ddd",e.SPACE_MONTH_YEAR_FORMAT="MMMM YYYY"}(r||(r={}))},4038:function(e,t,n){var r,a;n.d(t,{H:function(){return a},V:function(){return r}}),function(e){e.TABLE_VIEW="table view",e.CALENDAR_VIEW="calendar view"}(r||(r={})),function(e){e.ACTUAL="actual",e.HISTORY="history"}(a||(a={}))},2422:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var r=n(885),a=n(2419),i=n(2791),c=n(1087),u=n(919),o=n(4038),s=n(8870),l=n(9877),d=n(890),f=n(4518),p=n(4165),h=n(5861),x=n(7892),Z=n.n(x),v=n(1622),m=n(7047),j=n(7834),y=n(9118),D=n(7689),g=n(184),w=[{field:"id",headerName:"Absence ID",width:130},{field:"type",headerName:"Type",width:120},{field:"startDate",headerName:"Start Date",width:130,valueGetter:function(e){return Z()(e.row.startDate).format(y.U.DOT_FORMAT)}},{field:"endDate",headerName:"End Date",width:130,valueGetter:function(e){return Z()(e.row.endDate).format(y.U.DOT_FORMAT)}},{field:"notes",headerName:"Notes",width:400},{field:"action",headerName:"Action",width:260,valueGetter:function(e){return Z()(e.row.action).fromNow()}}],b=function(e){var t=e.filter,n=(0,i.useState)([]),a=(0,r.Z)(n,2),c=a[0],u=a[1],o=(0,i.useState)(!1),l=(0,r.Z)(o,2),f=l[0],x=l[1],Z=(0,D.s0)();return(0,i.useEffect)((function(){var e=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var n;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.XJ)({filter:t});case 2:n=e.sent,u(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{x(!0),e()}catch(n){}finally{x(!1)}}),[t]),f?(0,g.jsx)(m.Z,{width:"100%",component:"div",height:"500px",children:(0,g.jsx)(v._,{rows:c,columns:w})}):0===c.length?(0,g.jsx)(s.Z,{display:"flex",justifyContent:"center",children:(0,g.jsx)(d.Z,{children:"First add data"})}):(0,g.jsx)(v._,{onCellClick:function(e){var t=e.id;return Z("/vacation/request/".concat(t))},rows:c,sx:{overflow:"auto",minHeight:"500px",width:"100%"},columns:w,pageSize:5,rowsPerPageOptions:[5]})},A=n(6934),k=(0,A.ZP)(s.Z)({backgroundColor:"#ccc",display:"grid",gap:"1px",gridTemplateColumns:"repeat(7, 1fr)",gridTemplateRows:"repeat(6, 1fr)"}),E=(0,A.ZP)(s.Z)((function(){return{cursor:"pointer",padding:"10px",color:"#fff",minHeight:"200px",position:"relative"}})),C=function(e){var t=e.requestData.type;return(0,g.jsx)(s.Z,{mt:"10px",children:(0,g.jsx)(d.Z,{textAlign:"center",children:t})})},T=function(e){var t=e.day,n=e.requestData,r=e.isSelectedDay,a=e.isVacation,i=(0,D.s0)();return(0,g.jsxs)(E,{bgcolor:a?"#83851e":"#837373",onClick:function(){return i(a&&n?"/vacation/request/".concat(n.id):"/vacation/request/ ")},children:[(0,g.jsx)(s.Z,{color:r?"#ff0000":"#000",children:(0,g.jsx)(d.Z,{children:t.format(y.U.DAY)})}),(0,g.jsx)(s.Z,{width:"100%",overflow:"auto",display:"flex",flexDirection:"column",justifyContent:"center",children:n&&(0,g.jsx)(C,{requestData:n})})]},t.unix())},_=function(e){var t=e.arrayOfDay,n=e.selectedDate,a=(0,i.useState)([]),c=(0,r.Z)(a,2),u=c[0],o=c[1];(0,i.useEffect)((function(){var e=function(){var e=(0,h.Z)((0,p.Z)().mark((function e(){var t;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.Kt)(n);case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();try{e()}catch(t){}}),[n]);var s=(0,i.useCallback)((function(e){return u.some((function(t){var n=t.endDate,r=t.startDate;return e.isBetween(Z()(r).subtract(1,"day"),n)}))}),[u]),l=(0,i.useMemo)((function(){return t.map((function(e){return{isVacation:s(e),isSelectedDay:e.isSame(n,"day"),requestData:u.find((function(t){var n=t.endDate,r=t.startDate;return e.isBetween(Z()(r).subtract(1,"day"),n)})),day:e}}))}),[t,s,n,u]);return(0,g.jsx)(k,{children:l.map((function(e){var t=e.day,n=e.isVacation,r=e.requestData,a=e.isSelectedDay;return(0,g.jsx)(T,{isVacation:n,isSelectedDay:a,requestData:r,day:t},t.unix())}))})},S=(0,A.ZP)(s.Z)({padding:"10px",color:"#fff",backgroundColor:"#774353",position:"relative"}),O=(0,A.ZP)(s.Z)({backgroundColor:"#ccc",display:"grid",gap:"1px",gridTemplateColumns:"repeat(7,1fr)",gridTemplateRows:"1fr"}),V=n(2982),L=function(e,t){return(0,V.Z)(Array(t-1)).reduce((function(e){var t,n=null===(t=e.at(-1))||void 0===t?void 0:t.add(1,"day");return[].concat((0,V.Z)(e),[n])}),[e])},I=function(e){var t=e.startDayInstance,n=L(t,7);return(0,g.jsx)(O,{children:n.map((function(e){return(0,g.jsx)(S,{children:e.format(y.U.SHORT_DAY_OF_WEEK)},e.unix())}))})},N=function(e){var t=e.selectedDate,n=t.startOf("month").startOf("week"),r=L(n,42);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(I,{startDayInstance:n}),(0,g.jsx)(_,{selectedDate:t,arrayOfDay:r})]})},R=n(3238),W=n(388),q=function(e){var t=e.filter,n=e.handleToggleFilter;return(0,g.jsx)(s.Z,{maxWidth:"400px",children:(0,g.jsxs)(R.Z,{fullWidth:!0,color:"primary",value:t,exclusive:!0,onChange:n,"aria-label":"Platform",children:[(0,g.jsx)(W.Z,{fullWidth:!0,value:"actual",children:"Actual"}),(0,g.jsx)(W.Z,{fullWidth:!0,value:"history",children:"History"})]})})},M=n(9276),Y=n(2199),H=n(3400),P=n(2156),U=n(8333),F=function(e){var t=e.setSelectedDate,n=e.selectedDate;return(0,g.jsxs)(M.Z,{display:"flex",alignItems:"center",children:[(0,g.jsxs)(Y.Z,{variant:"contained","aria-label":"outlined primary button group",children:[(0,g.jsx)(H.Z,{onClick:function(){t(n.clone().subtract(1,"month"))},children:(0,g.jsx)(P.Z,{})}),(0,g.jsx)(H.Z,{onClick:function(){t(n.clone().add(1,"month"))},children:(0,g.jsx)(U.Z,{})})]}),(0,g.jsx)(M.Z,{ml:"20px",children:n.format(y.U.SPACE_MONTH_YEAR_FORMAT)})]})},B=n(3951),J=function(){var e=(0,i.useState)((function(){return Z()()})),t=(0,r.Z)(e,2),n=t[0],p=t[1],h=(0,i.useState)(o.H.ACTUAL),x=(0,r.Z)(h,2),v=x[0],m=x[1],j=(0,i.useState)(o.V.TABLE_VIEW),y=(0,r.Z)(j,2),D=y[0],w=y[1],A=(0,B.Q)(),k=A.isMobile,E=A.isDesktop;return(0,g.jsxs)(u.A,{title:"Dashboard",children:[(0,g.jsxs)(s.Z,{component:"section",pb:"60px",pt:"30px",children:[(0,g.jsxs)(s.Z,{display:"flex",mt:"30px",mb:"30px",position:"relative",justifyContent:"space-between",alignItems:"center",children:[D===o.V.TABLE_VIEW?(0,g.jsx)(q,{filter:v,handleToggleFilter:function(e,t){m(t)}}):(0,g.jsx)(F,{selectedDate:n,setSelectedDate:p}),E&&(0,g.jsx)(s.Z,{top:30,left:"50%",children:(0,g.jsxs)(l.Z,{component:c.rU,to:"/vacation/request",color:"primary",variant:"extended","aria-label":"add",children:[(0,g.jsx)(a.Z,{}),(0,g.jsx)(s.Z,{pr:"10px",pl:"10px",children:(0,g.jsx)(d.Z,{children:"New request"})})]})}),(0,g.jsx)(s.Z,{children:(0,g.jsx)(f.Z,{variant:"contained",onClick:function(){D===o.V.TABLE_VIEW?w(o.V.CALENDAR_VIEW):w(o.V.TABLE_VIEW)},children:D===o.V.CALENDAR_VIEW?o.V.TABLE_VIEW:o.V.CALENDAR_VIEW})})]}),(0,g.jsx)(s.Z,{children:D===o.V.TABLE_VIEW?(0,g.jsx)(b,{filter:v}):(0,g.jsx)(N,{selectedDate:n})})]}),k&&(0,g.jsx)(s.Z,{children:(0,g.jsxs)(l.Z,{component:c.rU,to:"/vacation/request",color:"primary",variant:"extended","aria-label":"add",children:[(0,g.jsx)(a.Z,{}),(0,g.jsx)(s.Z,{pr:"10px",pl:"10px",children:(0,g.jsx)(d.Z,{children:"New request"})})]})})]})}},7834:function(e,t,n){n.d(t,{Kt:function(){return f},LX:function(){return p},QJ:function(){return d},XJ:function(){return l},m:function(){return x},tE:function(){return h}});var r=n(1413),a=n(2982),i=n(4165),c=n(5861),u=n(7892),o=n.n(u),s=n(4038),l=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter,r=localStorage.getItem("requests")){e.next=4;break}return e.abrupt("return",[]);case 4:a=JSON.parse(r),e.t0=n,e.next=e.t0===s.H.ACTUAL?8:e.t0===s.H.HISTORY?9:10;break;case 8:return e.abrupt("return",a.filter((function(e){var t=e.endDate;return o()(t).isAfter(o()().subtract(1,"day"))})));case 9:return e.abrupt("return",a.filter((function(e){var t=e.endDate;return o()(t).isBefore(o()())})));case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({});case 2:return n=e.sent,e.abrupt("return",n.find((function(e){var n=e.id;return t===n})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({});case 2:return n=e.sent,e.abrupt("return",n.filter((function(e){var n=e.endDate,r=e.startDate;return o()(n).isSame(t,"month")||o()(r).isSame(t,"month")})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:return e.abrupt("return",x(n));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({});case 2:return n=e.sent,r=n.filter((function(e){return e.id!==t})),localStorage.setItem("requests",JSON.stringify(r)),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(t){var n,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({});case 2:return n=e.sent,c=[].concat((0,a.Z)(n),[(0,r.Z)((0,r.Z)({},t),{},{id:o()().unix(),action:o()()})]),localStorage.setItem("requests",JSON.stringify(c)),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},919:function(e,t,n){n.d(t,{A:function(){return D}});var r=n(885),a=n(2791),i=n(1087),c=n(4395),u=n(890),o=n(7394),s=n(4663),l=n(8870),d=n(9877),f=n(3400),p=n(3044),h=n(5473),x=n(4518),Z=n(6598),v=n(184),m=function(e){var t=e.title,n=e.auth,m=e.email,j=e.handleLogOut,y=e.backLinkPath,D=(0,a.useState)(!1),g=(0,r.Z)(D,2),w=g[0],b=g[1],A=(0,a.useState)(null),k=(0,r.Z)(A,2),E=k[0],C=k[1];return(0,v.jsx)(c.Z,{position:"static",children:(0,v.jsx)(Z.Z,{children:(0,v.jsxs)(s.Z,{children:[(0,v.jsx)(l.Z,{children:y&&(0,v.jsx)(d.Z,{component:i.rU,to:y,color:"secondary",variant:"circular",children:(0,v.jsx)(o.Z,{})})}),(0,v.jsx)(u.Z,{textAlign:"center",variant:"h6",component:"p",sx:{flexGrow:1},children:t}),n&&(0,v.jsxs)("div",{children:[(0,v.jsx)(f.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){b(!0),C(e.currentTarget)},color:"inherit",children:(0,v.jsx)(p.Z,{sx:{bgcolor:"#74gfhg"},children:m[0].toUpperCase()})}),(0,v.jsx)(h.ZP,{open:w,anchorEl:E,onClose:function(){C(null),b(!1)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,v.jsxs)(l.Z,{p:"20px",children:[(0,v.jsx)(u.Z,{children:m}),(0,v.jsx)(l.Z,{color:"primary",display:"flex",justifyContent:"center",width:"100%",children:(0,v.jsx)(x.Z,{title:"Logout",onClick:j,children:"Logout"})})]})})]})]})})})},j=n(1868),y=n(266),D=function(e){var t=e.title,n=e.children,r=e.backLinkPath,a=(0,j.K)(),i=a.email,c=a.handleLogOut,u=a.isLoggedIn;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(m,{auth:u,email:i,handleLogOut:c,title:t,backLinkPath:r}),(0,v.jsx)(y.Z,{component:"main",children:n})]})}}}]);
//# sourceMappingURL=422.023263a8.chunk.js.map